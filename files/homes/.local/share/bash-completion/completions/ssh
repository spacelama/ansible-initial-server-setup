# -*- Mode: shell-script -*-

# Stupidly, everything in our own directory that overrides the system
# definition, has to duplicate *every* completion, otherwise the first
# time they're lazyly loaded by default ordering, we'll lose our
# completion definition.
# That includes rsync that wants to pull in _scp_local_files.
# Or we can just import the functions non-lazily...
if ! type -t _ssh > /dev/null ; then
    . /usr/share/bash-completion/completions/ssh
fi

_ssh_stub() {
    _ssh "$@"

    # might as well also complete on usernames, if ssh's normal
    # completing didn't return anything
    if [ "${#COMPREPLY[@]}" = 0 ] ; then
        _user_at_host "$@"
    fi
}

complete -F _ssh_stub fsh ssh slogin autossh sidedoor
