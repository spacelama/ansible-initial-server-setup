#!/bin/bash
# -*- Mode: shell-script -*-
#template by ~tconnors/bin/newshscript
#Fri Jul 13 22:02:40 EST 2012
# $Revision: 1.5 $ $Date: 2024/10/11 09:02:16 $
# $Id: reset_mouse_keyboard_speed,v 1.5 2024/10/11 09:02:16 tconnors Exp $
# $Header: /home/tconnors/cvsroot/bin/reset_mouse_keyboard_speed,v 1.5 2024/10/11 09:02:16 tconnors Exp $
# $RCSfile: reset_mouse_keyboard_speed,v $

keyboard=true
mouse=true

case "$1" in
    --keyboard)
        mouse=false
        ;;
    --mouse)
        keyboard=false
        ;;
esac

if $keyboard ; then
    xset r on
    xset r rate 400 40
fi

if ! $mouse ; then
    exit
fi

case $LONGHOST-$SHORTDISPHOST in
    bohr*-galileo)
        xset m 8/3
    ;;
    scuzzie*-*|dirac*-*|gamow*-*|maxwell*-*|bohr*-*|hubble*-*|penrose*-*|curie*-*|fermi*-*)
        case $SHORTHOST in
            dirac|gamow|fermi)
                #xset m 30/10 10
                # xinput list: ->
                for dev in 'HID 046d:c521' 'Logitech MX Master 3S' ; do
                    list_props=$( xinput list-props "pointer:$dev" ) ||
                        continue
                    case "$dev" in
                        Logitech\ MX\ Master\ 3S)
                            k="libinput Accel Speed"
                            v=0.2
                        ;;
                        HID*)
                            k="libinput Accel Speed"
                            v=0.9
                            ;;
                        *)
                            echo "Forgot dev match? $dev"
                            break
                            ;;
                    esac
                    if echo "$list_props" | grep "$k" ; then
                        xinput set-prop "pointer:$dev" "$k" $v
                        echo " Setting pointer:$dev $k $v"
                        echo -n "    --> "
                        xinput list-props "pointer:$dev" | grep "$k"
                    fi
                done
                ;;
            scuzzie|dirac-laptop|maxwell)
                xset m 13/10 1
                ;;
            *)
                xset m 8/3
                ;;
        esac
    ;;
    *.ltu.edu.au-*)
        #xset m 4/3 10
        :
    ;;
    *.swin.edu.au-*)
        case $LONGHOST in
            oxygen*.swin.edu.au|polonium*.swin.edu.au)
                xset m 10/3 2000
            ;;
            *)
                xset m 4/3
            ;;
        esac
    ;;
    *)
        xset m 11/3 8
    ;;
esac
